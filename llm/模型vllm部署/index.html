<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">




<title>AIæ¨¡å‹VLLMéƒ¨ç½² | Abnerçš„åšå®¢</title>
<link rel="canonical" href="https://abnerxc.github.io/llm/%E6%A8%A1%E5%9E%8Bvllm%E9%83%A8%E7%BD%B2/">
<meta property="og:type" content="article" />
<meta property="og:title" content="AIæ¨¡å‹VLLMéƒ¨ç½² | Abnerçš„åšå®¢" />
<meta property="og:url" content="https://abnerxc.github.io/llm/%E6%A8%A1%E5%9E%8Bvllm%E9%83%A8%E7%BD%B2/" />








<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/custom.css" />
<script src="/js/copy-code-block.js"></script>
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    </head>

    <body>
        <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="https://abnerxc.github.io/">Abnerçš„åšå®¢</a>

        <nav class="menu">
            
        </nav>
    </div>
</header>

        <main class="main-wrapper">
            <div class="main">
                

<section class="single">
    <h1 class="title">AIæ¨¡å‹VLLMéƒ¨ç½²</h1>

    <div class="tip">
        <time datetime="2025-03-05 18:07:58 &#43;0800 CST">2025/03/05</time>
        <span class="split">Â·</span>
        <span> 404 words </span>
        <span class="split">Â·</span>
        <span>
            2 minutes to read
        </span>
    </div>

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/ai">AI</a>
            
        </div>
        

        
    </div>

    
    
    <div class="post-toc">
        <h3>ç›®å½•</h3>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜</a></li>
    <li><a href="#è½¯ä»¶å®‰è£…">è½¯ä»¶å®‰è£…</a></li>
    <li><a href="#vllmè¿è¡Œ">vllmè¿è¡Œ</a></li>
    <li><a href="#æ¨¡å‹è°ƒç”¨">æ¨¡å‹è°ƒç”¨</a></li>
  </ul>
</nav>
    </div>
    

    <hr />

    <div class="content">
        <h1 id="ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜ <a href="#%e7%8e%af%e5%a2%83%e8%af%b4%e6%98%8e" class="anchor">ğŸ”—</a></h1><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>OS: Ubuntu 22.04
</span></span><span style="display:flex;"><span>GPU: A10æ˜¾å¡ 24G
</span></span><span style="display:flex;"><span>CPU: 12æ ¸
</span></span><span style="display:flex;"><span>vLLM: 0.7.X
</span></span><span style="display:flex;"><span>Python: 3.10
</span></span><span style="display:flex;"><span>MiniConda3: lastest version
</span></span><span style="display:flex;"><span>Nvidia Driver: 12.4
</span></span><span style="display:flex;"><span>CUDA: 12.4
</span></span></code></pre></div><h1 id="è½¯ä»¶å®‰è£…">è½¯ä»¶å®‰è£… <a href="#%e8%bd%af%e4%bb%b6%e5%ae%89%e8%a3%85" class="anchor">ğŸ”—</a></h1><h2 id="conda-å®‰è£…">conda å®‰è£… <a href="#conda-%e5%ae%89%e8%a3%85" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir -p ~/miniconda3
</span></span><span style="display:flex;"><span>wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
</span></span><span style="display:flex;"><span>bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
</span></span><span style="display:flex;"><span>rm -rf ~/miniconda3/miniconda.sh
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆå§‹åŒ–conda</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda init bash  
</span></span><span style="display:flex;"><span><span style="color:#75715e">#é…ç½®æ¸…åæº</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/menpo/
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
</span></span><span style="display:flex;"><span><span style="color:#75715e">#æ˜¾ç¤ºæ£€ç´¢è·¯å¾„ï¼Œæ¯æ¬¡å®‰è£…åŒ…æ—¶ä¼šå°†åŒ…æºè·¯å¾„æ˜¾ç¤ºå‡ºæ¥</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --set show_channel_urls yes
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --set always_yes True
</span></span><span style="display:flex;"><span><span style="color:#75715e">#æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…é™¤ç´¢å¼•ç¼“å­˜ï¼Œä¿è¯ç”¨çš„æ˜¯é•œåƒç«™æä¾›çš„ç´¢å¼•</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda clean -i
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ˜¾ç¤ºæ‰€æœ‰é•œåƒé€šé“è·¯å¾„å‘½ä»¤</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --show channels
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ä¸æ˜¾ç¤ºbaseç¯å¢ƒ</span>
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda config --set auto_activate_base false
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿é…ç½®ç”Ÿæ•ˆ</span>
</span></span><span style="display:flex;"><span>source ~/.bashrc 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#è™šæ‹Ÿç¯å¢ƒåˆ›å»º </span>
</span></span><span style="display:flex;"><span>conda create --name<span style="color:#f92672">=</span>vllm python<span style="color:#f92672">=</span>3.10
</span></span><span style="display:flex;"><span>conda activate vllm
</span></span></code></pre></div><h2 id="nvidiaé©±åŠ¨å®‰è£…">nvidiaé©±åŠ¨å®‰è£… <a href="#nvidia%e9%a9%b1%e5%8a%a8%e5%ae%89%e8%a3%85" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># å®‰è£…nvidiaé©±åŠ¨</span>
</span></span><span style="display:flex;"><span>sudo apt-get update <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade -y
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¿…è¦ä¾èµ–</span>
</span></span><span style="display:flex;"><span>sudo apt-get install -y dkms build-essential <span style="color:#75715e"># æ‰§è¡Œå®Œæˆé‡å¯</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># linuxç¦ç”¨Nouvauï¼ˆå¦‚æœæ²¡æœ‰éœ€è¦æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼‰</span>
</span></span><span style="display:flex;"><span>sudo bash -c <span style="color:#e6db74">&#39;echo &#34;blacklist nouveau&#34; &gt;&gt; /etc/modprobe.d/blacklist.conf&#39;</span>
</span></span><span style="display:flex;"><span>sudo bash -c <span style="color:#e6db74">&#39;echo &#34;blacklist lbm-nouveau&#34; &gt;&gt; /etc/modprobe.d/blacklist.conf&#39;</span>
</span></span><span style="display:flex;"><span>sudo bash -c <span style="color:#e6db74">&#39;echo &#34;options nouveau modeset=0&#34; &gt;&gt; /etc/modprobe.d/blacklist.conf&#39;</span>
</span></span><span style="display:flex;"><span>sudo update-initramfs -u <span style="color:#75715e"># æ‰§è¡Œå®Œæˆé‡å¯</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®‰è£…é©±åŠ¨  https://www.nvidia.cn/drivers è‡ªè¡ŒæŸ¥æ‰¾å¯¹åº”æ˜¾å¡é©±åŠ¨å’Œç³»ç»Ÿç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>mkdir ~/Downloads  <span style="color:#f92672">&amp;&amp;</span> cd ~/Downloads 
</span></span><span style="display:flex;"><span>sudo dpkg -i nvidia-driver-local-repo-ubuntu2204-550.144.03_1.0-1_amd64.deb
</span></span><span style="display:flex;"><span>sudo apt-get update <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade -y
</span></span><span style="display:flex;"><span>sudo apt-get install -y cuda-drivers
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é‡å¯æœåŠ¡å™¨</span>
</span></span></code></pre></div><h2 id="cudaå·¥å…·åŒ…å®‰è£…">cudaå·¥å…·åŒ…å®‰è£… <a href="#cuda%e5%b7%a5%e5%85%b7%e5%8c%85%e5%ae%89%e8%a3%85" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#ä¸‹è½½åœ°å€ï¼šhttps://developer.nvidia.com/cuda-toolkit-archiveï¼Œæ‰¾åˆ°12.4.0ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>cd ~/Downloads 
</span></span><span style="display:flex;"><span>wget https://developer.download.nvidia.com/compute/cuda/12.4.0/local_installers/cuda_12.4.0_550.54.14_linux.run
</span></span><span style="display:flex;"><span>sudo chmod a+x cuda_12.4.0_550.54.14_linux.run 
</span></span><span style="display:flex;"><span>sudo sh cuda_12.4.0_550.54.14_linux.run
</span></span><span style="display:flex;"><span><span style="color:#75715e">#è®¾ç½®ç¯å¢ƒå˜é‡</span>
</span></span><span style="display:flex;"><span>vim ~/.bashrc  
</span></span><span style="display:flex;"><span>export LD_LIBRARY_PATH<span style="color:#f92672">=</span>$LD_LIBRARY_PATH:/usr/local/cuda-12.4/lib64
</span></span><span style="display:flex;"><span>export PATH<span style="color:#f92672">=</span>$PATH:/usr/local/cuda-12.4/bin
</span></span><span style="display:flex;"><span>export CUDA_HOME<span style="color:#f92672">=</span>$CUDA_HOME:/usr/local/cuda-12.4
</span></span><span style="display:flex;"><span>source ~/.bashrc
</span></span><span style="display:flex;"><span><span style="color:#75715e">#æŸ¥çœ‹å®‰è£…</span>
</span></span><span style="display:flex;"><span>nvcc --version
</span></span></code></pre></div><h2 id="pytorchå’Œvllmå®‰è£…">pytorchå’Œvllmå®‰è£… <a href="#pytorch%e5%92%8cvllm%e5%ae%89%e8%a3%85" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># å®‰è£…pytorch https://download.pytorch.org/whl/torch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># torch-2.4.0+cu124-cp310-cp310-linux_x86_64.whl ï¼Œå…¶ä¸­cu124è¡¨ç¤ºcuda-12.4.0 cp310è¡¨ç¤ºpython-3.10</span>
</span></span><span style="display:flex;"><span>cd ~/Downloads
</span></span><span style="display:flex;"><span>wget https://download.pytorch.org/whl/cu124/torch-2.4.0%2Bcu124-cp310-cp310-linux_x86_64.whl#sha256<span style="color:#f92672">=</span>2cb28155635e3d3d0be198e3f3e7457a1d7b99e8c2eedc73fe22fab574d11a4c
</span></span><span style="display:flex;"><span>conda activate vllm
</span></span><span style="display:flex;"><span>pip install torch-2.4.0+cu124-cp310-cp310-linux_x86_64.whl
</span></span><span style="display:flex;"><span>pip install vLLM
</span></span></code></pre></div><h1 id="vllmè¿è¡Œ">vllmè¿è¡Œ <a href="#vllm%e8%bf%90%e8%a1%8c" class="anchor">ğŸ”—</a></h1><h2 id="é­”æ­ç¤¾åŒºæ–¹å¼ä¸‹è½½">é­”æ­ç¤¾åŒºæ–¹å¼ä¸‹è½½ <a href="#%e9%ad%94%e6%90%ad%e7%a4%be%e5%8c%ba%e6%96%b9%e5%bc%8f%e4%b8%8b%e8%bd%bd" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#ä¼˜å…ˆä½¿ç”¨é˜¿é‡Œæ¨å‡ºçš„é­”æ­ä¸‹è½½ï¼Œæ¨¡å‹æ²¡æœ‰huggingfaceå…¨é¢ï¼Œæ•™ç¨‹åœ°å€ï¼šhttps://modelscope.cn/docs/home</span>
</span></span><span style="display:flex;"><span>modelscope download --model <span style="color:#e6db74">&#39;unsloth/DeepSeek-R1-Distill-Llama-8B&#39;</span> --local_dir <span style="color:#e6db74">&#39;/home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B&#39;</span>
</span></span></code></pre></div><h2 id="huggingfaceæ–¹å¼æ¨¡å‹ä¸‹è½½å¤‡é€‰">huggingfaceæ–¹å¼æ¨¡å‹ä¸‹è½½ï¼ˆå¤‡é€‰ï¼‰ <a href="#huggingface%e6%96%b9%e5%bc%8f%e6%a8%a1%e5%9e%8b%e4%b8%8b%e8%bd%bd%e5%a4%87%e9%80%89" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> huggingface_hub <span style="color:#f92672">import</span> snapshot_download
</span></span><span style="display:flex;"><span>model_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;unsloth/DeepSeek-R1-Distill-Llama-8B&#34;</span>
</span></span><span style="display:flex;"><span>local_dir<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;/home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># repo_id æ¨¡å‹id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># local_dir ä¸‹è½½åœ°å€</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># endpoint é•œåƒåœ°å€</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># resume_download (ä¸­æ–­å)ç»§ç»­ä¸‹è½½</span>
</span></span><span style="display:flex;"><span>snapshot_download(repo_id<span style="color:#f92672">=</span>model_name, local_dir<span style="color:#f92672">=</span>local_dir,
</span></span><span style="display:flex;"><span>                  revision<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main&#34;</span>,
</span></span><span style="display:flex;"><span>                  endpoint<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;https://hf-mirror.com&#39;</span>,  <span style="color:#75715e">#é•œåƒåœ°å€ä¼šé™æµ,ä¸å»ºè®®ä½¿ç”¨è¾ƒå¤§å‚æ•°æ¨¡å‹</span>
</span></span><span style="display:flex;"><span>                  force_download<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><h1 id="æ¨¡å‹è°ƒç”¨">æ¨¡å‹è°ƒç”¨ <a href="#%e6%a8%a1%e5%9e%8b%e8%b0%83%e7%94%a8" class="anchor">ğŸ”—</a></h1><h3 id="æ¨¡å‹å¯åŠ¨">æ¨¡å‹å¯åŠ¨ <a href="#%e6%a8%a1%e5%9e%8b%e5%90%af%e5%8a%a8" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>å¯åŠ¨è¯´æ˜ï¼š
</span></span><span style="display:flex;"><span>CUDA_VISIBLE_DEVICES<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> vllm serve /home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B --port <span style="color:#ae81ff">8088</span> --max-model-len <span style="color:#ae81ff">16384</span>
</span></span><span style="display:flex;"><span>å‚æ•°è¯´æ˜:
</span></span><span style="display:flex;"><span>CUDA_VISIBLE_DEVICES<span style="color:#f92672">=</span>0ï¼šæŒ‡å®šä½¿ç”¨çš„ GPU è®¾å¤‡ï¼ˆ0 è¡¨ç¤ºç¬¬ä¸€å— GPUï¼‰ã€‚
</span></span><span style="display:flex;"><span>/home/ubuntu/data/DeepSeek-R1-Distill-Llama-8Bï¼šæ¨¡å‹çš„å®é™…ä¿å­˜è·¯å¾„ã€‚
</span></span><span style="display:flex;"><span>--portï¼šæœåŠ¡ç›‘å¬çš„ç«¯å£å·ï¼ˆå¯æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰ã€‚
</span></span><span style="display:flex;"><span>--max-model-lenï¼šæ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦ã€‚
</span></span><span style="display:flex;"><span>--tensor-parallel-sizeã€-tpï¼šå¤šå¼ é‡å¹¶è¡Œå‰¯æœ¬æ•°é‡ï¼ˆå¯¹äº GPUï¼‰ã€‚é»˜è®¤å€¼ï¼š1ã€‚
</span></span><span style="display:flex;"><span>--gpu-memory-utilizationï¼šè®¾ç½®æ¯å¼ GPUçš„æ˜¾å­˜åˆ©ç”¨ç‡ä¸Šé™ï¼Œå–å€¼èŒƒå›´ä¸º0~1ï¼ˆä¾‹å¦‚ï¼š0.9è¡¨ç¤ºé™åˆ¶ä¸º90%çš„æ˜¾å­˜ä½¿ç”¨ï¼‰
</span></span><span style="display:flex;"><span>--host å’Œ --portï¼šæŒ‡å®šæœåŠ¡å™¨åœ°å€å’Œç«¯å£ã€‚
</span></span><span style="display:flex;"><span>--enforce-eagerï¼šå¯ç”¨å³æ—¶æ‰§è¡Œæ¨¡å¼ï¼ˆEager Executionï¼‰ï¼Œå³æ¨¡å‹æ¨ç†ä¼šåœ¨æ¯ä¸ªæ“ä½œæ‰§è¡Œæ—¶ç«‹å³è¿›è¡Œï¼Œè€Œéå…ˆæ„å»ºå®Œæ•´çš„æ“ä½œå›¾ã€‚
</span></span><span style="display:flex;"><span>--dtypeï¼šæ¨¡å‹æƒé‡å’Œæ¿€æ´»çš„ç²¾åº¦ç±»å‹ã€‚å¯èƒ½çš„å€¼ï¼šautoã€halfã€float16ã€bfloat16ã€floatã€float32ã€‚é»˜è®¤å€¼ï¼šautoã€‚
</span></span><span style="display:flex;"><span>--max-num-seqsï¼šæ¯æ¬¡è¿­ä»£çš„æœ€å¤§åºåˆ—æ•°ã€‚
</span></span><span style="display:flex;"><span>--distributed-executor-backend<span style="color:#f92672">=</span>rayï¼šæŒ‡å®šåˆ†å¸ƒå¼æœåŠ¡çš„åç«¯ï¼Œå¯èƒ½çš„å€¼ï¼šrayã€mpã€‚é»˜è®¤å€¼ï¼šrayï¼ˆå½“ä½¿ç”¨è¶…è¿‡ä¸€ä¸ª GPU æ—¶ï¼Œè‡ªåŠ¨è®¾ç½®ä¸º rayï¼‰ã€‚
</span></span><span style="display:flex;"><span>æœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡è®¿é—® http://localhost:8088/docs æŸ¥çœ‹ API æ–‡æ¡£ï¼ŒéªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
</span></span><span style="display:flex;"><span>åå°å¯åŠ¨ï¼š
</span></span><span style="display:flex;"><span>nohup vllm serve /home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B --port <span style="color:#ae81ff">8088</span> --max-model-len <span style="color:#ae81ff">16384</span> --gpu-memory-utilization 0.9 &gt; ./logs/vllm.log 2&gt;&amp;<span style="color:#ae81ff">1</span> &amp;
</span></span></code></pre></div><h3 id="æµ‹è¯•è°ƒç”¨">æµ‹è¯•è°ƒç”¨ <a href="#%e6%b5%8b%e8%af%95%e8%b0%83%e7%94%a8" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl --location <span style="color:#e6db74">&#39;http://101.33.248.34:8088/v1/chat/completions&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--header <span style="color:#e6db74">&#39;Content-Type: application/json&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--data <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;model&#34;: &#34;/home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;messages&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;role&#34;: &#34;user&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;content&#34;: &#34;ä½ æ˜¯è°ï¼Ÿ&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div><h2 id="open-webuiè®¿é—®vllm">open-webuiè®¿é—®vllm <a href="#open-webui%e8%ae%bf%e9%97%aevllm" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>conda create --name openwebui python<span style="color:#f92672">=</span>3.12
</span></span><span style="display:flex;"><span>pip install open-webui -i https://mirrors.aliyun.com/pypi/simple/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯åŠ¨</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#é•œåƒç«™ç‚¹</span>
</span></span><span style="display:flex;"><span>export HF_ENDPOINT<span style="color:#f92672">=</span>https://hf-mirror.com
</span></span><span style="display:flex;"><span><span style="color:#75715e">## ç¦ç”¨OLLAMA API</span>
</span></span><span style="display:flex;"><span>export ENABLE_OLLAMA_API<span style="color:#f92672">=</span>False
</span></span><span style="display:flex;"><span><span style="color:#75715e">## è®¾ç½®vllm APIçš„åŸºç¡€URLä¸ºæœ¬åœ°æœåŠ¡å™¨</span>
</span></span><span style="display:flex;"><span>export OPENAI_API_BASE_URL<span style="color:#f92672">=</span>http://localhost:8088/v1
</span></span><span style="display:flex;"><span><span style="color:#75715e">## è®¾ç½®é»˜è®¤æ¨¡å‹è·¯å¾„</span>
</span></span><span style="display:flex;"><span>export DEFAULT_MODELS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/home/ubuntu/data/DeepSeek-R1-Distill-Llama-8B&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## å¯åŠ¨Open WebUI</span>
</span></span><span style="display:flex;"><span>open-webui serve  
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åå°å¯åŠ¨</span>
</span></span><span style="display:flex;"><span>nohup open-webui serve &gt; ./logs/open-webui.log 2&gt;&amp;<span style="color:#ae81ff">1</span> &amp;
</span></span></code></pre></div>
    </div>

    
</section>


            </div>
            <div class="side">
                <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/ai">ai(3)</a>
            </li>
        
            <li>
                <a href="/categories/go">go(23)</a>
            </li>
        
            <li>
                <a href="/categories/%E4%BB%A3%E7%A0%81">ä»£ç (2)</a>
            </li>
        
            <li>
                <a href="/categories/%E5%B7%A5%E5%85%B7">å·¥å…·(8)</a>
            </li>
        
            <li>
                <a href="/categories/%E9%80%86%E5%90%91">é€†å‘(3)</a>
            </li>
        
            <li>
                <a href="/categories/%E9%9D%A2%E8%AF%95">é¢è¯•(5)</a>
            </li>
        
    </ul>
</div>

                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/note/">Recent Note</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/note/%E6%9E%B6%E6%9E%84%E8%80%83%E7%82%B9/">åœºæ™¯æ€»ç»“</a>
            </li>
        
            <li>
                <a href="/note/rdis-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E9%9B%AA%E5%B4%A9%E5%87%BB%E7%A9%BF%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">ç¼“å­˜ç©¿é€ã€é›ªå´©ã€å‡»ç©¿çš„è§£å†³æ–¹æ³•</a>
            </li>
        
            <li>
                <a href="/note/redis-%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB/">å•çº¿ç¨‹çš„redisä¸ºä»€ä¹ˆå¿«</a>
            </li>
        
            <li>
                <a href="/note/redis-%E6%80%BB%E7%BB%93/">redisæ€»ç»“</a>
            </li>
        
            <li>
                <a href="/note/mysql-%E6%80%BB%E7%BB%93/">mysqlæ€»ç»“</a>
            </li>
        
    </ul>
</div>

                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/android/">Recent Android</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/android/redroid%E4%BD%BF%E7%94%A8/">Redroidå®‰å“å®¹å™¨</a>
            </li>
        
            <li>
                <a href="/android/%E5%85%A5%E9%97%A8/">é€†å‘ç¯å¢ƒ-æ‚</a>
            </li>
        
            <li>
                <a href="/android/frida%E6%95%99%E7%A8%8B/">fridaæ•™ç¨‹</a>
            </li>
        
    </ul>
</div>

                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/tool/">Recent Tool</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tool/linux-almalinux%E4%BC%98%E5%8C%96/">AlmaLinux10</a>
            </li>
        
            <li>
                <a href="/tool/almalinux-k8s/">AlmaLinux-k8så®‰è£…</a>
            </li>
        
            <li>
                <a href="/tool/vscode%E6%8A%98%E8%85%BE/">vscodeæŠ˜è…¾</a>
            </li>
        
            <li>
                <a href="/tool/linux-ubuntu%E4%BC%98%E5%8C%96/">Ubuntuå¼€æœºä¼˜åŒ–</a>
            </li>
        
            <li>
                <a href="/tool/shell-ssh_script/">sshå¸¸ç”¨è„šæœ¬</a>
            </li>
        
    </ul>
</div>

                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/llm/">Recent Llm</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/llm/transformers-%E5%85%A5%E9%97%A8%E7%AF%87/">Transformers-å…¥é—¨ç¯‡</a>
            </li>
        
            <li>
                <a href="/llm/%E6%A8%A1%E5%9E%8Bvllm%E9%83%A8%E7%BD%B2/">AIæ¨¡å‹VLLMéƒ¨ç½²</a>
            </li>
        
            <li>
                <a href="/llm/%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83/">AIæ¨¡å‹å¾®è°ƒ</a>
            </li>
        
    </ul>
</div>

                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/go/">Recent Go</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/go/go%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B7%B7%E5%90%88%E5%86%99%E5%B1%8F%E9%9A%9Cgc%E6%A8%A1%E5%BC%8F%E5%85%A8%E6%80%BB%E7%BB%93/">Goä¸‰è‰²æ ‡è®°æ··åˆå†™å±éšœGCæ¨¡å¼å…¨æ€»ç»“</a>
            </li>
        
            <li>
                <a href="/go/go%E4%B8%ADmake%E4%B8%8Enew%E5%8C%BA%E5%88%AB/">Goä¸­makeä¸newåŒºåˆ«</a>
            </li>
        
            <li>
                <a href="/go/go%E5%B8%B8%E7%94%A8bug%E5%92%8C%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E7%9A%84%E5%AE%9E%E8%B7%B5%E6%96%B9%E6%B3%95/">Goå¸¸ç”¨bugå’Œæ€§èƒ½é—®é¢˜çš„å®è·µæ–¹æ³•</a>
            </li>
        
            <li>
                <a href="/go/grpc%E6%80%BB%E7%BB%93/">GRPCç¬”è®°</a>
            </li>
        
            <li>
                <a href="/go/go%E7%9A%84defer%E6%80%BB%E7%BB%93/">Goçš„deferæ€»ç»“</a>
            </li>
        
    </ul>
</div>

                
            </div>
        </main>
        <footer class="footer">
    <div class="footer-row">
        
            
            
                <a class="footer-item" href="https://abnerxc.github.io/note/index.xml">
                    Feed of Note
                    <i class="icofont-rss"></i>
                </a>
            
        
            
            
                <a class="footer-item" href="https://abnerxc.github.io/android/index.xml">
                    Feed of Android
                    <i class="icofont-rss"></i>
                </a>
            
        
            
            
                <a class="footer-item" href="https://abnerxc.github.io/tool/index.xml">
                    Feed of Tool
                    <i class="icofont-rss"></i>
                </a>
            
        
            
            
                <a class="footer-item" href="https://abnerxc.github.io/llm/index.xml">
                    Feed of Llm
                    <i class="icofont-rss"></i>
                </a>
            
        
            
            
                <a class="footer-item" href="https://abnerxc.github.io/go/index.xml">
                    Feed of Go
                    <i class="icofont-rss"></i>
                </a>
            
        

        
            
            
        
    </div>

    
</footer>

    </body>
</html>
